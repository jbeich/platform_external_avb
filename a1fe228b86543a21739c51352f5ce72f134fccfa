{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6350a0c9_6e0bdbae",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2023-09-28T03:12:13Z",
      "side": 1,
      "message": "Oops, this breaks other unit tests that uses `avbtool`.\n\nCan you help to run `libfs_avb_internal_test` and fix the issue there (also add them into the same topic).\n\nThere were 3 failures:\n  system/core/fs_mgr/libfs_avb/tests/avb_util_test.cpp:883: Failure\nExpected equality of these values:\n  \"Minimum libavb version:   1.0\\n\" \"Header Block:             256 bytes\\n\" \"Authentication Block:     1088 bytes\\n\" \"Auxiliary Block:          3840 bytes\\n\" \"Public key (sha1):        5227b569de003adc7f8ec3fc03e05dfbd969abad\\n\" \"Algorithm:                SHA256_RSA8192\\n\" \"Rollback Index:           0\\n\" \"Flags:                    0\\n\" \"Rollback Index Location:  0\\n\" \"Release String:           \u0027unit test\u0027\\n\" \"Descriptors:\\n\" \"    Chain Partition descriptor:\\n\" \"      Partition Name:          boot\\n\" \"      Rollback Index Location: 1\\n\" \"      Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\\n\" \"    Chain Partition descriptor:\\n\" \"      Partition Name:          vbmeta_system\\n\" \"      Rollback Index Location: 2\\n\" \"      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     1088 bytes\\nAuxiliary Block:          3840 bytes\\nPublic key (sha1):        5227b569de003adc7f8ec3fc03e05dfbd969abad\\nAlgorithm:                SHA256_RSA8192\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          boot\\n      Rollback Index Location: 1\\n      Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\\n    Chain Partition descriptor:\\n      Partition Name:          vbmeta_system\\n      Rollback Index Location: 2\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n  InfoImage(\"vbmeta.img\")\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     1088 bytes\\nAuxiliary Block:          3840 bytes\\nPublic key (sha1):        5227b569de003adc7f8ec3fc03e05dfbd969abad\\nAlgorithm:                SHA256_RSA8192\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          boot\\n      Rollback Index Location: 1\\n      Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\\n      Flags:                   0\\n    Chain Partition descriptor:\\n      Partition Name:          vbmeta_system\\n      Rollback Index Location: 2\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n      Flags:                   0\\n\"\nWith diff:\n@@ -14,6 +14,8 @@\n       Rollback Index Location: 1\n       Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\n+      Flags:                   0\n     Chain Partition descriptor:\n       Partition Name:          vbmeta_system\n       Rollback Index Location: 2\n-      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\n+      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\n+      Flags:                   0\\n\n\nsystem/core/fs_mgr/libfs_avb/tests/avb_util_test.cpp:913: Failure\nExpected equality of these values:\n  \"Minimum libavb version:   1.0\\n\" \"Header Block:             256 bytes\\n\" \"Authentication Block:     576 bytes\\n\" \"Auxiliary Block:          2176 bytes\\n\" \"Public key (sha1):        2597c218aae470a130f61162feaae70afd97f011\\n\" \"Algorithm:                SHA256_RSA4096\\n\" \"Rollback Index:           0\\n\" \"Flags:                    0\\n\" \"Rollback Index Location:  0\\n\" \"Release String:           \u0027unit test\u0027\\n\" \"Descriptors:\\n\" \"    Chain Partition descriptor:\\n\" \"      Partition Name:          system\\n\" \"      Rollback Index Location: 3\\n\" \"      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     576 bytes\\nAuxiliary Block:          2176 bytes\\nPublic key (sha1):        2597c218aae470a130f61162feaae70afd97f011\\nAlgorithm:                SHA256_RSA4096\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          system\\n      Rollback Index Location: 3\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n  InfoImage(\"vbmeta_system.img\")\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     576 bytes\\nAuxiliary Block:          2176 bytes\\nPublic key (sha1):        2597c218aae470a130f61162feaae70afd97f011\\nAlgorithm:                SHA256_RSA4096\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          system\\n      Rollback Index Location: 3\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n      Flags:                   0\\n\"\nWith diff:\n@@ -13,3 +13,4 @@\n       Partition Name:          system\n       Rollback Index Location: 3\n-      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\n+      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\n+      Flags:                   0\\n\n\n  system/core/fs_mgr/libfs_avb/tests/avb_util_test.cpp:883: Failure\nExpected equality of these values:\n  \"Minimum libavb version:   1.0\\n\" \"Header Block:             256 bytes\\n\" \"Authentication Block:     1088 bytes\\n\" \"Auxiliary Block:          3840 bytes\\n\" \"Public key (sha1):        5227b569de003adc7f8ec3fc03e05dfbd969abad\\n\" \"Algorithm:                SHA256_RSA8192\\n\" \"Rollback Index:           0\\n\" \"Flags:                    0\\n\" \"Rollback Index Location:  0\\n\" \"Release String:           \u0027unit test\u0027\\n\" \"Descriptors:\\n\" \"    Chain Partition descriptor:\\n\" \"      Partition Name:          boot\\n\" \"      Rollback Index Location: 1\\n\" \"      Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\\n\" \"    Chain Partition descriptor:\\n\" \"      Partition Name:          vbmeta_system\\n\" \"      Rollback Index Location: 2\\n\" \"      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     1088 bytes\\nAuxiliary Block:          3840 bytes\\nPublic key (sha1):        5227b569de003adc7f8ec3fc03e05dfbd969abad\\nAlgorithm:                SHA256_RSA8192\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          boot\\n      Rollback Index Location: 1\\n      Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\\n    Chain Partition descriptor:\\n      Partition Name:          vbmeta_system\\n      Rollback Index Location: 2\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n  InfoImage(\"vbmeta.img\")\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     1088 bytes\\nAuxiliary Block:          3840 bytes\\nPublic key (sha1):        5227b569de003adc7f8ec3fc03e05dfbd969abad\\nAlgorithm:                SHA256_RSA8192\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          boot\\n      Rollback Index Location: 1\\n      Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\\n      Flags:                   0\\n    Chain Partition descriptor:\\n      Partition Name:          vbmeta_system\\n      Rollback Index Location: 2\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n      Flags:                   0\\n\"\nWith diff:\n@@ -14,6 +14,8 @@\n       Rollback Index Location: 1\n       Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\n+      Flags:                   0\n     Chain Partition descriptor:\n       Partition Name:          vbmeta_system\n       Rollback Index Location: 2\n-      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\n+      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\n+      Flags:                   0\\n\n\nsystem/core/fs_mgr/libfs_avb/tests/avb_util_test.cpp:913: Failure\nExpected equality of these values:\n  \"Minimum libavb version:   1.0\\n\" \"Header Block:             256 bytes\\n\" \"Authentication Block:     576 bytes\\n\" \"Auxiliary Block:          2176 bytes\\n\" \"Public key (sha1):        2597c218aae470a130f61162feaae70afd97f011\\n\" \"Algorithm:                SHA256_RSA4096\\n\" \"Rollback Index:           0\\n\" \"Flags:                    0\\n\" \"Rollback Index Location:  0\\n\" \"Release String:           \u0027unit test\u0027\\n\" \"Descriptors:\\n\" \"    Chain Partition descriptor:\\n\" \"      Partition Name:          system\\n\" \"      Rollback Index Location: 3\\n\" \"      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     576 bytes\\nAuxiliary Block:          2176 bytes\\nPublic key (sha1):        2597c218aae470a130f61162feaae70afd97f011\\nAlgorithm:                SHA256_RSA4096\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          system\\n      Rollback Index Location: 3\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n  InfoImage(\"vbmeta_system.img\")\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     576 bytes\\nAuxiliary Block:          2176 bytes\\nPublic key (sha1):        2597c218aae470a130f61162feaae70afd97f011\\nAlgorithm:                SHA256_RSA4096\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          system\\n      Rollback Index Location: 3\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n      Flags:                   0\\n\"\nWith diff:\n@@ -13,3 +13,4 @@\n       Partition Name:          system\n       Rollback Index Location: 3\n-      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\n+      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\n+      Flags:                   0\\n\n\n  system/core/fs_mgr/libfs_avb/tests/avb_util_test.cpp:883: Failure\nExpected equality of these values:\n  \"Minimum libavb version:   1.0\\n\" \"Header Block:             256 bytes\\n\" \"Authentication Block:     1088 bytes\\n\" \"Auxiliary Block:          3840 bytes\\n\" \"Public key (sha1):        5227b569de003adc7f8ec3fc03e05dfbd969abad\\n\" \"Algorithm:                SHA256_RSA8192\\n\" \"Rollback Index:           0\\n\" \"Flags:                    0\\n\" \"Rollback Index Location:  0\\n\" \"Release String:           \u0027unit test\u0027\\n\" \"Descriptors:\\n\" \"    Chain Partition descriptor:\\n\" \"      Partition Name:          boot\\n\" \"      Rollback Index Location: 1\\n\" \"      Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\\n\" \"    Chain Partition descriptor:\\n\" \"      Partition Name:          vbmeta_system\\n\" \"      Rollback Index Location: 2\\n\" \"      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     1088 bytes\\nAuxiliary Block:          3840 bytes\\nPublic key (sha1):        5227b569de003adc7f8ec3fc03e05dfbd969abad\\nAlgorithm:                SHA256_RSA8192\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          boot\\n      Rollback Index Location: 1\\n      Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\\n    Chain Partition descriptor:\\n      Partition Name:          vbmeta_system\\n      Rollback Index Location: 2\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n  InfoImage(\"vbmeta.img\")\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     1088 bytes\\nAuxiliary Block:          3840 bytes\\nPublic key (sha1):        5227b569de003adc7f8ec3fc03e05dfbd969abad\\nAlgorithm:                SHA256_RSA8192\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          boot\\n      Rollback Index Location: 1\\n      Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\\n      Flags:                   0\\n    Chain Partition descriptor:\\n      Partition Name:          vbmeta_system\\n      Rollback Index Location: 2\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n      Flags:                   0\\n\"\nWith diff:\n@@ -14,6 +14,8 @@\n       Rollback Index Location: 1\n       Public key (sha1):       cdbb77177f731920bbe0a0f94f84d9038ae0617d\n+      Flags:                   0\n     Chain Partition descriptor:\n       Partition Name:          vbmeta_system\n       Rollback Index Location: 2\n-      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\n+      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\n+      Flags:                   0\\n\n\nsystem/core/fs_mgr/libfs_avb/tests/avb_util_test.cpp:913: Failure\nExpected equality of these values:\n  \"Minimum libavb version:   1.0\\n\" \"Header Block:             256 bytes\\n\" \"Authentication Block:     576 bytes\\n\" \"Auxiliary Block:          2176 bytes\\n\" \"Public key (sha1):        2597c218aae470a130f61162feaae70afd97f011\\n\" \"Algorithm:                SHA256_RSA4096\\n\" \"Rollback Index:           0\\n\" \"Flags:                    0\\n\" \"Rollback Index Location:  0\\n\" \"Release String:           \u0027unit test\u0027\\n\" \"Descriptors:\\n\" \"    Chain Partition descriptor:\\n\" \"      Partition Name:          system\\n\" \"      Rollback Index Location: 3\\n\" \"      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     576 bytes\\nAuxiliary Block:          2176 bytes\\nPublic key (sha1):        2597c218aae470a130f61162feaae70afd97f011\\nAlgorithm:                SHA256_RSA4096\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          system\\n      Rollback Index Location: 3\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\"\n  InfoImage(\"vbmeta_system.img\")\n    Which is: \"Minimum libavb version:   1.0\\nHeader Block:             256 bytes\\nAuthentication Block:     576 bytes\\nAuxiliary Block:          2176 bytes\\nPublic key (sha1):        2597c218aae470a130f61162feaae70afd97f011\\nAlgorithm:                SHA256_RSA4096\\nRollback Index:           0\\nFlags:                    0\\nRollback Index Location:  0\\nRelease String:           \u0027unit test\u0027\\nDescriptors:\\n    Chain Partition descriptor:\\n      Partition Name:          system\\n      Rollback Index Location: 3\\n      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n      Flags:                   0\\n\"\nWith diff:\n@@ -13,3 +13,4 @@\n       Partition Name:          system\n       Rollback Index Location: 3\n-      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\\n\n+      Public key (sha1):       2597c218aae470a130f61162feaae70afd97f011\n+      Flags:                   0\\n",
      "revId": "a1fe228b86543a21739c51352f5ce72f134fccfa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a13072cb_4723a2eb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 2002655
      },
      "writtenOn": "2023-09-28T06:27:17Z",
      "side": 1,
      "message": "Hi Bowgo,please help take a look,thanks.https://android-review.googlesource.com/c/platform/system/core/+/2765270",
      "parentUuid": "6350a0c9_6e0bdbae",
      "revId": "a1fe228b86543a21739c51352f5ce72f134fccfa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}