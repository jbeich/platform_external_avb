{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2e16dbf2_9ce985ee",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1069095
      },
      "writtenOn": "2022-03-16T22:14:46Z",
      "side": 1,
      "message": "I might have missed this - is there any logic in the code to do reverse lookup for index of a given payload?",
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2629cc38_6438f8dc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1943085
      },
      "writtenOn": "2022-03-16T22:48:15Z",
      "side": 1,
      "message": "No, good point. I have had the same thought before. This is very doable and would provide a better user experience.\n\nHow about I file a bug for this improvement feature, and take care of it in a separate CL?",
      "parentUuid": "2e16dbf2_9ce985ee",
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a88c90a5_b6b67c33",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1069095
      },
      "writtenOn": "2022-03-21T21:52:16Z",
      "side": 1,
      "message": "\u003e No, good point. I have had the same thought before. This is very doable and would provide a better user experience.\n\u003e \n\u003e How about I file a bug for this improvement feature, and take care of it in a separate CL?\n\nSGTM!",
      "parentUuid": "2629cc38_6438f8dc",
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8bc5140f_e7dae1a7",
        "filename": "tools/transparency/verify/README.md",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1069095
      },
      "writtenOn": "2022-03-16T22:14:46Z",
      "side": 1,
      "message": "Please also add another section on how to invoke, explaining that an executable named `verifier` will be produced should there be no error, and an example of invocation and result of both a successful test \u0026 a failed verification look like.",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 9
      },
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "874b9764_0231cc4e",
        "filename": "tools/transparency/verify/README.md",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1943085
      },
      "writtenOn": "2022-03-23T10:18:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8bc5140f_e7dae1a7",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 9
      },
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82c53cd9_829c069a",
        "filename": "tools/transparency/verify/README.md",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1069095
      },
      "writtenOn": "2022-03-16T22:14:46Z",
      "side": 1,
      "message": "It\u0027s unclear if we\u0027ll be further publishing specific usage instructions there. Even if we do, it is still best to have guides on how to accomplish the most basic tasks here in this README, so that users don\u0027t need to go back and forth between this README and the website.\n\nAlso, the linked URL points to a page that is very large, and thus it is not ideal to just tell users to \"refer to this big page and comb for which part is relevant to what they are trying to do with this tool here\".",
      "range": {
        "startLine": 12,
        "startChar": 119,
        "endLine": 12,
        "endChar": 224
      },
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd29440e_37223c4c",
        "filename": "tools/transparency/verify/README.md",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1943085
      },
      "writtenOn": "2022-03-16T22:48:15Z",
      "side": 1,
      "message": "\u003e It\u0027s unclear if we\u0027ll be further publishing specific usage instructions there. \nThis statement surprises me - I thought that the website was going to be the central place for Binary Transparency information? In my mind, downloading/using this tool is a requirement just as avbtool or any of the others are (https://developers.google.com/android/binary_transparency/pixel#prerequisites-to-verifying).\n\nSo my mental model of the layout of information was that that page is the main thing users will read and follow, and that page links to these other tools they download. I believe currently we don\u0027t have extensive documentation in READMEs where some of the other code live - we just describe how to use it on the public website.\n\nBut I definitely see the value of your point:\n\u003e Even if we do, it is still best to have guides on how to accomplish the most basic tasks here in this README, so that users don\u0027t need to go back and forth between this README and the website.\nI\u0027m happy to make these changes, but first I\u0027m curious if you have any thoughts about my proposal?\n\n\u003e Also, the linked URL points to a page that is very large, and thus it is not ideal to just tell users to \"refer to this big page and comb for which part is relevant to what they are trying to do with this tool here\".\nAck. I guess I had a chicken and egg problem, because the new section is in CR (I have CCed you), unsubmitted. I plan to update this URL after that CL is submitted and populates on the public website.",
      "parentUuid": "82c53cd9_829c069a",
      "range": {
        "startLine": 12,
        "startChar": 119,
        "endLine": 12,
        "endChar": 224
      },
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "167be79e_3dd197b7",
        "filename": "tools/transparency/verify/README.md",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1069095
      },
      "writtenOn": "2022-03-21T21:52:16Z",
      "side": 1,
      "message": "OK. I\u0027ve probably spoken too quickly about publishing specific usage in the website - and for the record, I am not against doing that - the larger point I\u0027m trying to make is to make sure that this README is somewhat self sufficient, without users going back and forth to the website.\n\nUpdating this URL again after the CL is submitted sgtm - thanks for getting that in place.\n\nBut for the purpose of this CL, I\u0027d like to have a `Usage` Section to have an example of how the `verifier` can be invoked. (So, I\u0027ll mark this comment as resolved, and leave the one prior to this opened).",
      "parentUuid": "cd29440e_37223c4c",
      "range": {
        "startLine": 12,
        "startChar": 119,
        "endLine": 12,
        "endChar": 224
      },
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0367ca73_86a7c7bd",
        "filename": "tools/transparency/verify/README.md",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1943085
      },
      "writtenOn": "2022-03-23T10:18:58Z",
      "side": 1,
      "message": "Great, SGTM.",
      "parentUuid": "167be79e_3dd197b7",
      "range": {
        "startLine": 12,
        "startChar": 119,
        "endLine": 12,
        "endChar": 224
      },
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e4b27b2_daa0ea48",
        "filename": "tools/transparency/verify/README.md",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1069095
      },
      "writtenOn": "2022-03-16T22:14:46Z",
      "side": 1,
      "message": "Another point:\n\nSo, I managed to build the `verifier` tool with the instruction given, and invoke it with the following command: `./verifier -image_info_index 0 -payload_path ./payload.txt`, and initially encountered `FAILURE: inclusion check error in tlog.CheckRecord: invalid transparency proof`, and it turned out that I included an additional `\\n` in the payload, as I manually constructed it following the format https://developers.google.com/android/binary_transparency/pixel#log-content. I suspect this might trip up some other users too.",
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6d31936_a35dfda6",
        "filename": "tools/transparency/verify/README.md",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1069095
      },
      "writtenOn": "2022-03-16T22:14:46Z",
      "side": 1,
      "message": "Additionally, could you also add some guide on how to \"create a payload file\" here. It\u0027s totally fine if we were to copy-paste a few commandlines here, and maintain a link to specific *section* within the website that we discussed this, which, I think is https://developers.google.com/android/binary_transparency/pixel#construct-the-payload-for-verification",
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b1edcc55_61a23c94",
        "filename": "tools/transparency/verify/README.md",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1943085
      },
      "writtenOn": "2022-03-16T22:48:15Z",
      "side": 1,
      "message": "Good callout. I guess this depends on the content of the transparency log, so I will double check that it is all consistent (without the `\\n`) and then update the website payload specification accordingly.",
      "parentUuid": "8e4b27b2_daa0ea48",
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "24311f41_336c5130",
        "filename": "tools/transparency/verify/README.md",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1943085
      },
      "writtenOn": "2022-03-23T10:18:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a6d31936_a35dfda6",
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9243202d_d81375ad",
        "filename": "tools/transparency/verify/README.md",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1943085
      },
      "writtenOn": "2022-03-23T10:18:58Z",
      "side": 1,
      "message": "I have verified that the format on the website is correct. However, it is very likely for people to run into problems because certain text editors such as vim automatically add an extra newline at the end of a file. I have made a change for the verifier to try to fix whitespace issues in Google3, and I will upstream that change here in AOSP in the next CL.",
      "parentUuid": "b1edcc55_61a23c94",
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef8a4122_99b13179",
        "filename": "tools/transparency/verify/cmd/verifier/verifier.go",
        "patchSetId": 3
      },
      "lineNbr": 60,
      "author": {
        "id": 1069095
      },
      "writtenOn": "2022-03-16T22:14:46Z",
      "side": 1,
      "message": "I think this should be `image_info_index` instead of `leaf_index`?",
      "range": {
        "startLine": 60,
        "startChar": 30,
        "endLine": 60,
        "endChar": 40
      },
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cc23201c_f8539f5f",
        "filename": "tools/transparency/verify/cmd/verifier/verifier.go",
        "patchSetId": 3
      },
      "lineNbr": 60,
      "author": {
        "id": 1943085
      },
      "writtenOn": "2022-03-16T22:48:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef8a4122_99b13179",
      "range": {
        "startLine": 60,
        "startChar": 30,
        "endLine": 60,
        "endChar": 40
      },
      "revId": "e392c7db3246cea0d24d183350b39724e48fddb5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}